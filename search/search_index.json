{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"Caleb Yuen's Datasheet as part of  ClapSense  for  Team 204  <p>Submission: December 9, 2025</p> <p></p>","tags":["tag1","tag2"]},{"location":"#clapsense-prototype","title":"ClapSense Prototype","text":"","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<p>This datasheet explains the design and setup of my subsystem, the Master Controller (Hub), for Team 204\u2019s ClapSense Smart Light. It shows how my board interfaces with the Audio Front-End, Light Sensor Board, and Sensor Front-End, and how it controls the actuator system using a FAN8100N H-Bridge to toggle the lamp when a valid clap is detected.  </p> <p>The goal of this project is to create a smart lighting system that responds only to intentional user input while remaining safe, modular, and easy to set up through a low-voltage 9 V \u2192 5 V regulated power design.</p>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<p>ClapSense is built around a single Microchip PIC18F57Q43 Curiosity Nano that serves as the Master Controller (Hub). The Audio Front-End detects claps, the Light Sensor Board senses outside light to automatically shut off system, and the Sensor Front-End measures ambient light levels for adaptive brightness.  </p> <p>The Master Controller processes all inputs, filters valid clap patterns, and sends control signals through the FAN8100N H-Bridge to the 6 V DC motor, creating precise and safe actuation. This project integrates key embedded system principles such as signal processing, sensor feedback, power regulation, and actuator control to deliver a reliable, low-voltage, and hands-free smart lighting experience.</p> <p>*ClapSense Team Report.</p>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<p>As the Team Lead and Master Controller (Hub) designer for the ClapSense project, Caleb developed the main subsystem that coordinates all communication between the Audio Front-End, Light Sensor Board, and Sensor Front-End.</p> <p>I designed the schematic and PCB for the Hub circuit, selected and justified key components such as the FAN8100N H-Bridge and DFRobot FIT0495-A DC motor, and documented how the 5 V logic, 5 V power regulation, and actuator control integrate safely within the team\u2019s modular 8-pin ribbon interface. </p> <p>Beyond technical design, he ensured consistent documentation, power and logic standardization across all boards, and led coordination between team members during schematic review, PCB layout, and website integration for Team 204\u2019s final submission.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Individual Block Diagram","text":"<p>Team 204 \u2013 Clap-Activated Smart Light Caleb Yuen \u2013 Master Controller (Hub) </p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This page describes the hardware layout of my subsystem (Hub) for the team clap-activated light project. The Master Controller (PIC18F57Q43 Curiosity Nano) processes sensor data from the Audio, Light Sensor, and Sensor Front-End boards, then drives the actuator to control the LED output. The design uses an 8-pin ribbon-cable standard for consistent power and signal connections across all subsystems.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#block-diagram","title":"Block Diagram","text":"<p>Microcontroller: Microchip PIC18F57Q43 Curiosity Nano  </p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#power-path","title":"Power Path","text":"<p>9 V DC input \u2192 LM7805 Regulator \u2192 5 V system rail  All logic runs at 5 V internally on the PIC.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#inputs","title":"Inputs","text":"Source Signal MCU Pin Type Description Light Sensor Board RA1_LightOutput RA1 Digital In Senses outside light to automatically shut off system Audio Board RA0_Clap_Signal RA0 Digital In Detects clap events from Audio Front-End Sensor Front-End RA3_DIST_ADC RA3 Analog In Measures ambient light levels for adaptive brightness","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#outputs","title":"Outputs","text":"Destination Signal MCU Pin Type Description (H-Bridge) RB0_PWM_A / RB1_PWM_B RB0 / RB1 PWM Out Controls motor speed and direction Onboard D1 (Red LED) RA2 Digital Out Hub status indicator","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#actuator-path","title":"Actuator Path","text":"<p>FAN8100N H-Bridge receives PWM inputs from RB0 &amp; RB1 and drives the DFRobot FIT0441 6 V motor. Power pins PVC CA/B are fed by +5V and controlled through the PIC enable pin RA5.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/","title":"Component Selection","text":""},{"location":"02-Component-Selection/Component-Selection/#master-controller-hub","title":"Master Controller (HUB)","text":""},{"location":"02-Component-Selection/Component-Selection/#h-bridge-motor-driver-options","title":"H-Bridge Motor Driver Options","text":"<ol> <li> <p>TB6612FNG</p> <p></p> <ul> <li>$1.82/each</li> <li>link to product</li> </ul> Pros Cons Works with 3.3 V logic, so it connects directly to the Hub without extra parts. Can only handle about 1 amp continuously, so it\u2019s not good for larger motors. Has built-in protection to prevent overheating or short circuits. The small surface-mount chip is tricky to solder without a breakout board. Allows you to control two motors or use both sides together for more power. The 3-amp peak rating only lasts a short time before the chip shuts down. </li> <li> <p>DRV8833</p> <p></p> <ul> <li>$2.62/each</li> <li>link to product</li> </ul> Pros Cons Works with 3.3 V control signals, making it compatible with the Hub. Can get hot under heavy loads and needs good heat spreading on the PCB. Handles two motors and includes built-in protection for over-current, over-temperature, and undervoltage. Only comes in surface-mount packages, so it\u2019s not easy to use on a breadboard. Runs on 2.7\u201310.8 V, which fits perfectly in the project\u2019s \u22649 V limit. Needs a few extra small capacitors for stable operation, adding some circuit complexity. </li> <li> <p>2156-FAN8100N-FS-ND</p> <p></p> <ul> <li>On-Hand</li> <li>link to product</li> </ul> Pros Cons Works perfectly with your project\u2019s 6\u20139 V motor supply and 3.3 V logic from the Hub. Can only handle about 1.5 A per channel, which limits use to smaller motors. Has built-in protection features like thermal shutdown and short-circuit safety. Older chip, no longer in production\u2014can be harder to find replacements or breakout boards. Includes built-in diodes that protect against voltage spikes when motors switch direction.t Has a basic control setup (Forward, Reverse, Brake); requires extra PWM programming for smooth speed control. </li> </ol> <p>Choice: Option 3: 2156-FAN8100N-FS-ND</p> <p>Rationale: The FAN8100N was chosen for its reliable 3.3 V logic compatibility, built-in protection features, and sufficient current capacity to safely and efficiently drive our 6 V DC motor within the Hub subsystem.</p>"},{"location":"02-Component-Selection/Component-Selection/#dc-motor-options","title":"DC Motor Options","text":"<ol> <li> <p>FIT0495-A</p> <p></p> <ul> <li>$9.90/each</li> <li>link to product</li> </ul> Pros Cons Uses very little current (~0.6 A stall), making it safe and easy for the TB6612FNG to drive. Turns slowly (about 15 RPM), so it\u2019s not good for fast-moving applications. Has high torque thanks to its metal gearbox; strong enough to press a button or lift small parts. Can only handle up to 7.5 V, so it can\u2019t use the full 9 V supply limit. Matches the system voltage (6\u20137.5 V) and provides smooth, controlled motion for precise actuation. The gearbox has some mechanical play (backlash), which can cause small delays or looseness in movement. </li> <li> <p>Adafruit 711 \u2013 DC Toy Motor (130 Size)</p> <p></p> <ul> <li>$1.95/each</li> <li>link to product</li> </ul> Pros Cons Runs on 4.5\u20139 V, which fits perfectly within your project\u2019s voltage range. Has very low torque, so it\u2019s not good for pushing, lifting, or heavy mechanical tasks. Fast and inexpensive, great for testing motion, vibration, or quick demos. Comes without a gearbox or mount, so it\u2019s harder to attach to an arm or mechanism. Draws less than 1 A, keeping it safe for the TB6612FNG driver. Wears out quickly under long use, since it\u2019s a small hobby motor designed for short runs. </li> <li> <p>Portescap 16G88-213E.1</p> <p></p> <ul> <li>$59.92/each</li> <li>link to product</li> </ul> Pros Cons Very efficient (\u224884%), which means less heat, longer battery life, and smoother performance. Expensive and harder to find since it\u2019s a precision motor meant for specialized applications. Low current draw (~0.55 A) keeps it safe for the TB6612FNG driver and prevents overheating. Low torque, so it can\u2019t handle heavy loads unless paired with a gearbox. High build quality and smooth operation, great for precision control or demonstrations. Requires custom mounting, since its small shaft and round body don\u2019t fit standard brackets. </li> </ol> <p>Choice: Option 1: DFRobot 6 V Metal Gearmotor (FIT0495-A)</p> <p>Rationale: The DFRobot 6 V metal gearmotor was chosen for its high torque and low-speed output, providing smooth, controlled motion for pressing a button without bounce or damage. It operates safely on the project\u2019s \u2264 9 V supply, draws under 1 A, and pairs perfectly with the FAN8100N H-Bridge, ensuring simple, reliable actuation with built-in protection and 3.3 V logic compatibility.</p>"},{"location":"03-BOM/BOM/","title":"Bill of Materials","text":"","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#bill-of-materials-clapsense-hub-master-controller","title":"Bill of Materials \u2013 ClapSense Hub (Master Controller)","text":"<p>This Bill of Materials (BOM) lists all components used in the Hub subsystem (Master Controller) for the ClapSense project. The Hub interfaces with the Audio Front-End, Light Detector Board, and Distance Front-End through 8-pin ribbon connectors and drives the lamp actuator using the FAN8100N H-Bridge motor driver.</p>","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#electronic-components","title":"Electronic Components","text":"Item Ref(s) Component Description / Value Qty Vendor Part # / Link Notes 1 U2 PIC18F57Q43-CY Microcontroller (40-pin) 1 Microchip DM164150 Main controller 2 U4 FAN8100N Motor Driver Bipolar Parallel 12-DIP 1 Digi-Key FAN8100N Controls LED actuator 3 M1 DC Motor Actuator (load) 1 DFRobot FIT0495A Lamp actuator motor 4 U1 LM7805 TO-220 Voltage Regulator (9 V \u2192 5 V) 1 Digi-Key LM7805CT Generates +5 V rail (Provided by Peralta) 5 J1 Barrel Jack Connector Power input (9 V DC) 1 Digi-Key PJ-002AH 9 V adapter input (Provided by Peralta) 6 F1 Fuse 1 A resettable fuse 1 Digi-Key RXE010 Power protection 7 J2, J3, J9 2\u00d74 Header (8-Pin Ribbon) Subsystem connectors 3 Digi-Key M80-6100842 Connects Hub to other boards (Provided by Peralta) 8 R2 220 \u03a9 Sensor bias resistor 1 Digi-Key CF14JT220R Light sensor filter (Provided by Peralta) 9 R1 10 k\u03a9 Signal pull-down resistors 2 Digi-Key CF14JT10K0 For CLAP and FILTER inputs (Provided by Peralta) 10 R4 1 k\u03a9 LED current-limit 1 Digi-Key CF14JT1K00 RA2 status LED (Provided by Peralta) 11 R6, R7 10 k\u03a9 Standby pull-down (FAN8100N) 1 Digi-Key CF14JT10K0 Motor STBY control (Provided by Peralta) 12 C3, C7, C8, Cnano1 0.1 \u00b5F Decoupling capacitors 4 Digi-Key CL21B104KBCNNNC Noise suppression (Provided by Peralta) 13 Cnano2 4.7 \u00b5F Decoupling capacitors 1 Digi-Key CL21B104KBCNNNC Noise suppression (Provided by Peralta) 14 C3 10 \u00b5F Electrolytic Regulator input filter 1 Digi-Key Provided by Peralta Power stability 15 C6 100 \u00b5F Electrolytic Decoupling capacitors 1 Digi-Key Provided by Peralta Power stability 16 D1 LED (Red 3 mm) Indicator LED 1 Digi-Key WP710A10ID RA2 status indicator (Provided by Peralta) 17 Breadboard / Jumper Wires Prototyping accessory \u2013 1 set Peralta \u2013 For breadboard testing (Provided by Peralta) 18 USB Cable (Micro-B) Programming &amp; Power \u2013 1 Peralta \u2013 For Curiosity Nano 19 J2, J3, J9 8-Pin IDC Ribbon Cable Standard 8-conductor ribbon cable with connectors attached (2\u00d74 pin) 3 Peralta \u2013 Cable that connects Hub \u2194 Filter \u2194 Sensors","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#system-notes","title":"System Notes","text":"<ul> <li>Power Input: 9 V DC via barrel jack \u2192 LM7805 \u2192 +5 V rail.  </li> <li>Logic Level: 5 V I/O (compatible with Curiosity Nano).  </li> <li>Inter-Board Connection: 8-pin ribbon standard (+5 V, GND, signals).  </li> <li>Safety: 1 A fuse + decoupling capacitors at each subsystem.  </li> </ul>","tags":["tag1","tag2"]},{"location":"04-Schematic/schematic/","title":"Schematic","text":""},{"location":"04-Schematic/schematic/#overview","title":"Overview","text":"<p>This schematic shows the PIC18F57Q43 Curiosity Nano as the central controller for the ClapSense Hub. It interfaces with three external subsystems \u2014 the Audio Front-End, Light Sensor Board, and Sensor Front-End \u2014 using standardized 8-pin ribbon connectors.  </p> <p>The design includes a 9 V \u2192 5 V LM7805 voltage regulator with fuse protection, a FAN8100N H-Bridge motor driver for the actuator, and a 5 V logic interface between all boards. All power and signal connections align with the team block diagram and system-level design.</p>"},{"location":"04-Schematic/schematic/#schematic-preview","title":"Schematic Preview","text":""},{"location":"04-Schematic/schematic/#breadboard-design","title":"Breadboard Design","text":"<ul> <li>HUB RA2 connects to Light Sensor Board</li> <li>HUB RA0 connects to Audio Board</li> <li>HUB RA3 connects to Sensor Front-End</li> </ul>"},{"location":"04-Schematic/schematic/#downloads","title":"Downloads","text":"<ul> <li>View full PDF schematic </li> </ul>"},{"location":"04-Schematic/schematic/#notes","title":"Notes","text":"<ul> <li>Logic Voltage: 5 V (from PIC18F57Q43 VTG pin)  </li> <li>Motor Driver Supply: 5 V regulated from LM7805  </li> <li>Input Power: 9 V DC via barrel jack \u2192 Fuse \u2192 LM7805 \u2192 +5V rail  </li> <li>Outputs: +5V  shared with all subsystems through 8-pin connectors  </li> <li>Motor Driver: FAN8100N handles bidirectional drive, braking, and back-EMF protection internally  </li> <li>Grounds: All GND nets are shared across every subsystem for common reference  </li> </ul>"},{"location":"05-PCB%20Design/PCBDesign/","title":"PCB Design","text":""},{"location":"05-PCB%20Design/PCBDesign/#overview","title":"Overview","text":"<p>This page documents the full PCB design process for the ClapSense Hub board. It includes the final routed layout in KiCad, the manufactured PCB from JLCPCB, and the fully assembled version with the PIC18F57Q43 Curiosity Nano and supporting components installed. The board connects to the Audio, Light Sensor, and Sensor Front-End subsystems through standardized headers and uses an onboard H-bridge to drive the system\u2019s motor output. The images below show the evolution from digital layout to physical implementation, highlighting the final wiring, routing strategy, and connector placements used in the project.</p>"},{"location":"05-PCB%20Design/PCBDesign/#pcb-preview","title":"PCB Preview","text":""},{"location":"05-PCB%20Design/PCBDesign/#pcb-printed-design","title":"PCB Printed Design","text":""},{"location":"05-PCB%20Design/PCBDesign/#hub-final-design","title":"HUB Final Design","text":"<p>Note - R3, R5 and C5 were decided to be removed last minute that my team werent going give the hub analog input</p>"},{"location":"05-PCB%20Design/PCBDesign/#downloads","title":"Downloads","text":"<ul> <li>Download KiCad project ZIP</li> <li>Download PCB Gerber Files project ZIP</li> </ul>"},{"location":"06-Microcontroller%20Code/MicrocontrollerCode/","title":"Microcontroller Code","text":""},{"location":"06-Microcontroller%20Code/MicrocontrollerCode/#overview","title":"Overview","text":"<p>This program implements a reliable single-button control system for driving a motor using the PIC18F57Q43 Curiosity Nano. The on-board pushbutton (RB4) is used to detect single-press, double-press, and long-press input, each mapped to a different motor action. A single press runs the motor forward with a solid LED indicator, a double press reverses the motor with a blinking LED, and a long press stops the system entirely. To ensure accurate input recognition, the code includes a custom debouncing and timing engine that filters noise and distinguishes between press types. This creates a smooth, intuitive control interface that operates safely and consistently, demonstrating robust embedded design and state-based motor control.</p>"},{"location":"06-Microcontroller%20Code/MicrocontrollerCode/#downloads","title":"Downloads","text":"<ul> <li>Download Subsystem Hardware Functionality project ZIP</li> </ul>"},{"location":"07-Power-Budget/Power-Budget/","title":"Power Budget","text":""},{"location":"07-Power-Budget/Power-Budget/#overview","title":"Overview","text":"<p>This power budget summarizes the electrical needs of the ClapSense Hub based on the final hardware and spreadsheet results. The hub uses a 9 volt, 2 amp wall adapter that supplies an LM7805 linear regulator, which provides a stable 5 volt rail for the whole system. Every major part of the board, including the PIC18F57Q43 Curiosity Nano, the FAN8100N motor driver, the 6 volt gearmotor running at 5 volts, and the status LEDs, draws power from this regulator. When looking at the worst case numbers, the system uses around 655 milliamps. Adding a safety margin brings the expected requirement to about 820 milliamps. This is comfortably within the limits of both the LM7805 and the wall adapter, which means the board has plenty of room for startup surges, motor load changes, heat, and extra peripherals during testing. Overall, the final power analysis shows that the hub operates well within safe limits and has enough headroom for reliable performance.</p>"},{"location":"07-Power-Budget/Power-Budget/#power-budget","title":"Power Budget","text":""},{"location":"07-Power-Budget/Power-Budget/#downloads","title":"Downloads","text":"<p>The Power Budget template can be downloaded below:  </p> <ul> <li>Power Budget (.xlsx) </li> <li>Power Budget (.pdf) </li> </ul>"},{"location":"Appendix/","title":"Appendix - Main Page","text":"<p>The Appendix is where supporting information goes that is not in the main body.</p>"}]}