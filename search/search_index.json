{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"Caleb Yuen's Datasheet as part of  ClapSense  for  Team 204  <p>Submission: December 1, 2025 </p><p></p>","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<p>This datasheet explains the design and setup of my subsystem, the Master Controller (Hub), for Team 204\u2019s ClapSense Smart Light. It shows how my board interfaces with the Audio Front-End, Light Detector Board, and Distance Front-End, and how it controls the actuator system using a FAN8100N H-Bridge to toggle the lamp when a valid clap is detected.  </p> <p>The goal of this project is to create a smart lighting system that responds only to intentional user input while remaining safe, modular, and easy to set up through a low-voltage 9 V \u2192 5 V \u2192 3.3 V regulated power design.</p>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<p>Clapsense is built around a single Microchip PIC18F57Q43 Curiosity Nano that serves as the Master Controller. The Audio Front End detects claps, the ### Project Summary</p> <p>ClapSense is built around a single Microchip PIC18F57Q43 Curiosity Nano that serves as the Master Controller (Hub). The Audio Front-End detects claps, the Light Detector Board manages user inputs and status LEDs, and the Distance Front-End drives the actuator that physically toggles the lamp.  </p> <p>The Master Controller processes all inputs, filters valid clap patterns, and sends control signals through the FAN8100N H-Bridge to the 6 V DC motor, creating precise and safe actuation. This project integrates key embedded system principles such as signal processing, sensor feedback, power regulation, and actuator control to deliver a reliable, low-voltage, and hands-free smart lighting experience.</p> <p>*ClapSense Team Report.</p>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<p>As the Team Lead and Master Controller (Hub) designer for the ClapSense project, Caleb developed the main subsystem that coordinates all communication between the Audio Front-End, Light Detector Board, and Distance Front-End. His board, built around the Microchip PIC18F57Q43 Curiosity Nano, manages signal flow, initialization, and decision-making for the entire system.</p> <p>He designed the schematic and PCB for the Hub circuit, selected and justified key components such as the FAN8100N H-Bridge and DFRobot FIT0495-A DC motor, and documented how the 3.3 V logic, 5 V power regulation, and actuator control integrate safely within the team\u2019s modular 8-pin ribbon interface. </p> <p>Beyond technical design, he ensured consistent documentation, power and logic standardization across all boards, and led coordination between team members during schematic review, PCB layout, and website integration for Team 204\u2019s final submission.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Individual Block Diagram","text":"<p>Team 204 \u2013 Clap-Activated Smart Light Caleb Yuen \u2013 Master Controller (Hub) </p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This page describes the hardware layout of my subsystem (Hub) for the team clap-activated light project. The Master Controller (PIC18F57Q43 Curiosity Nano) processes sensor data from the Audio, Filter, and Sensor Front-End boards, then drives the actuator to control the lamp output. The design uses an 8-pin ribbon-cable standard for consistent power and signal connections across all subsystems.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#block-diagram","title":"Block Diagram","text":"<p>Microcontroller: Microchip PIC18F57Q43 Curiosity Nano  </p> <p>Inputs: - CLAP_IN from Audio Board - FILTER_SIGNAL_IN  from Light Detector Board - FILTER_TOGGLE from Light Detector Board  </p> <p>Outputs: - FILTER_STATUS_LED to Filter/Light Detector Board - PWM_MOTOR to Distance Front-End - MOTOR_IN1, MOTOR_IN2, MOTOR_STBY to Distance Front-End - Heartbeat LED on Hub board  </p> <p>Communication: Discrete GPIO over ribbon; no I\u00b2C in Rev 1. Power: 9 V DC in \u2192 5 V (LM7805) \u2192 3.3 V logic; common GND shared across all boards.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#pin-assignment-table","title":"Pin Assignment Table","text":"Pin Signal Direction Source \u2192 Destination MCU Pin (PIC18F57Q43) Voltage Notes 1 GND \u2014 \u2014 \u2014 0 V Common ground shared across all subsystems 2 +5V_SYS \u2014 Power \u2192 All Boards \u2014 5 V Regulated output from LM7805 (VM \u2192 5 V) 3 CLAP_IN Input Audio Board \u2192 Hub RB0 3.3 V (via divider) Digital clap detection signal 4 FILTER_SIGNAL_IN Input Light Detector \u2192 Hub RA0 3.3 V (via divider) Filtered threshold logic 5 FILTER_TOGGLE Input Light Detector \u2192 Hub RB1 3.3 V (via divider) Lamp toggle command 6 FILTER_STATUS_LED Output Hub \u2192 Light Detector Board RA2 3.3 V Status indicator LED 7 PWM_MOTOR Output (PWM) Hub \u2192 Distance Front-End RB2 (PWM1) 3.3 V PWM control for motor/actuator 8 MOTOR_STBY Output Hub \u2192 Distance Front-End RA5 3.3 V Enables H-Bridge (FAN8100N) 9 MOTOR_IN1 Output Hub \u2192 Distance Front-End RB3 3.3 V Motor direction A 10 MOTOR_IN2 Output Hub \u2192 Distance Front-End RB4 3.3 V Motor direction B 11 GND \u2014 \u2014 \u2014 0 V Interleaved ground for noise reduction 12 UART_RX_FILTER Input (optional) Light Detector \u2192 Hub (Debug) RC7 (RX) 3.3 V Serial receive for debug 13 UART_TX_FILTER Output (optional) Hub \u2192 Light Detector (Debug) RC6 (TX) 3.3 V Serial transmit for debug 14 SPARE \u2014 \u2014 \u2014 \u2014 Reserved for future expansion <p>Notes</p> <ul> <li>All PIC18F57Q43 logic operates at 3.3 V.  </li> <li>External 5 V signals from other boards are stepped down using 10 k\u03a9 / 20 k\u03a9 voltage dividers.  </li> <li>Only +5V_SYS and GND are shared between boards; interleave GND pins (1 and 11) to reduce EMI and noise.  </li> <li>UART pins (12\u201313) are optional for debugging with the Light Detector Board.  </li> <li>PWM, IN1, IN2, and STBY connect to the FAN8100N H-Bridge on the Distance Front-End to drive the DFRobot 6 V metal gear motor.</li> </ul>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/","title":"Component Selection","text":""},{"location":"02-Component-Selection/Component-Selection/#master-controller-hub","title":"Master Controller (HUB)","text":""},{"location":"02-Component-Selection/Component-Selection/#h-bridge-motor-driver-options","title":"H-Bridge Motor Driver Options","text":"<ol> <li> <p>TB6612FNG</p> <p></p> <ul> <li>$1.82/each</li> <li>link to product</li> </ul> Pros Cons Works with 3.3 V logic, so it connects directly to the Hub without extra parts. Can only handle about 1 amp continuously, so it\u2019s not good for larger motors. Has built-in protection to prevent overheating or short circuits. The small surface-mount chip is tricky to solder without a breakout board. Allows you to control two motors or use both sides together for more power. The 3-amp peak rating only lasts a short time before the chip shuts down. </li> <li> <p>DRV8833</p> <p></p> <ul> <li>$2.62/each</li> <li>link to product</li> </ul> Pros Cons Works with 3.3 V control signals, making it compatible with the Hub. Can get hot under heavy loads and needs good heat spreading on the PCB. Handles two motors and includes built-in protection for over-current, over-temperature, and undervoltage. Only comes in surface-mount packages, so it\u2019s not easy to use on a breadboard. Runs on 2.7\u201310.8 V, which fits perfectly in the project\u2019s \u22649 V limit. Needs a few extra small capacitors for stable operation, adding some circuit complexity. </li> <li> <p>2156-FAN8100N-FS-ND</p> <p></p> <ul> <li>On-Hand</li> <li>link to product</li> </ul> Pros Cons Works perfectly with your project\u2019s 6\u20139 V motor supply and 3.3 V logic from the Hub. Can only handle about 1.5 A per channel, which limits use to smaller motors. Has built-in protection features like thermal shutdown and short-circuit safety. Older chip, no longer in production\u2014can be harder to find replacements or breakout boards. Includes built-in diodes that protect against voltage spikes when motors switch direction.t Has a basic control setup (Forward, Reverse, Brake); requires extra PWM programming for smooth speed control. </li> </ol> <p>Choice: Option 3: 2156-FAN8100N-FS-ND</p> <p>Rationale: The FAN8100N was chosen for its reliable 3.3 V logic compatibility, built-in protection features, and sufficient current capacity to safely and efficiently drive our 6 V DC motor within the Hub subsystem.</p>"},{"location":"02-Component-Selection/Component-Selection/#dc-motor-options","title":"DC Motor Options","text":"<ol> <li> <p>FIT0495-A</p> <p></p> <ul> <li>$9.90/each</li> <li>link to product</li> </ul> Pros Cons Uses very little current (~0.6 A stall), making it safe and easy for the TB6612FNG to drive. Turns slowly (about 15 RPM), so it\u2019s not good for fast-moving applications. Has high torque thanks to its metal gearbox; strong enough to press a button or lift small parts. Can only handle up to 7.5 V, so it can\u2019t use the full 9 V supply limit. Matches the system voltage (6\u20137.5 V) and provides smooth, controlled motion for precise actuation. The gearbox has some mechanical play (backlash), which can cause small delays or looseness in movement. </li> <li> <p>Adafruit 711 \u2013 DC Toy Motor (130 Size)</p> <p></p> <ul> <li>$1.95/each</li> <li>link to product</li> </ul> Pros Cons Runs on 4.5\u20139 V, which fits perfectly within your project\u2019s voltage range. Has very low torque, so it\u2019s not good for pushing, lifting, or heavy mechanical tasks. Fast and inexpensive, great for testing motion, vibration, or quick demos. Comes without a gearbox or mount, so it\u2019s harder to attach to an arm or mechanism. Draws less than 1 A, keeping it safe for the TB6612FNG driver. Wears out quickly under long use, since it\u2019s a small hobby motor designed for short runs. </li> <li> <p>Portescap 16G88-213E.1</p> <p></p> <ul> <li>$59.92/each</li> <li>link to product</li> </ul> Pros Cons Very efficient (\u224884%), which means less heat, longer battery life, and smoother performance. Expensive and harder to find since it\u2019s a precision motor meant for specialized applications. Low current draw (~0.55 A) keeps it safe for the TB6612FNG driver and prevents overheating. Low torque, so it can\u2019t handle heavy loads unless paired with a gearbox. High build quality and smooth operation, great for precision control or demonstrations. Requires custom mounting, since its small shaft and round body don\u2019t fit standard brackets. </li> </ol> <p>Choice: Option 1: DFRobot 6 V Metal Gearmotor (FIT0495-A)</p> <p>Rationale: The DFRobot 6 V metal gearmotor was chosen for its high torque and low-speed output, providing smooth, controlled motion for pressing a button without bounce or damage. It operates safely on the project\u2019s \u2264 9 V supply, draws under 1 A, and pairs perfectly with the FAN8100N H-Bridge, ensuring simple, reliable actuation with built-in protection and 3.3 V logic compatibility.</p>"},{"location":"03-BOM/BOM/","title":"Bill of Materials","text":"","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#bill-of-materials-clapsense-hub-master-controller","title":"Bill of Materials \u2013 ClapSense Hub (Master Controller)","text":"<p>This Bill of Materials (BOM) lists all components used in the Hub Subsystem (Master Controller) for the ClapSense project. The hub interfaces with the Filter Board and Sensor Front-End using an 8-pin ribbon connector and drives the lamp actuator through the TB6612FNG motor driver.</p>","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#electronic-components","title":"Electronic Components","text":"Item Ref(s) Component Description / Value Qty Vendor Part # / Link Notes 1 U1 PIC18F57Q43-CY Microcontroller (40-pin) 1 Microchip DM164150 Main controller 2 U2 TB6612FNG Dual Motor Driver IC 1 Digi-Key TB6612FNG Controls lamp actuator 3 M2 DC Motor Actuator (load) 1 DFRobot FIT0495A Lamp actuator motor 4 U3 LM7805 TO-220 Voltage Regulator (9 V \u2192 5 V) 1 Digi-Key LM7805CT Generates +5 V rail (Provided by Peralta) 5 J1 Barrel Jack Connector Power input (9 V DC) 1 Digi-Key PJ-002AH 9 V adapter input (Provided by Peralta) 6 F1 Fuse 1 A resettable fuse 1 Digi-Key RXE010 Power protection 7 J2, J3, J5 2\u00d74 Header (8-Pin Ribbon) Subsystem connectors 3 Digi-Key M80-6100842 Connects Hub to other boards (Provided by Peralta) 8 R1 220 \u03a9 Sensor bias resistor 1 Digi-Key CF14JT220R Light sensor filter (Provided by Peralta) 9 R2, R5 10 k\u03a9 Signal pull-down resistors 2 Digi-Key CF14JT10K0 For CLAP and FILTER inputs (Provided by Peralta) 10 R3 1 k\u03a9 LED current-limit 1 Digi-Key CF14JT1K00 RA2 status LED (Provided by Peralta) 11 R4 10 k\u03a9 Standby pull-down (TB6612FNG) 1 Digi-Key CF14JT10K0 Motor STBY control (Provided by Peralta) 12 C2, C4, C6, C7 0.1 \u00b5F Decoupling capacitors 4 Digi-Key CL21B104KBCNNNC Noise suppression (Provided by Peralta) 13 C3 33 \u00b5F Electrolytic Regulator input filter 1 Digi-Key EEU-FR1V330 Power stability 14 C5 47 \u00b5F Electrolytic Regulator output filter 1 Digi-Key EEU-FR1V470 Output smoothing 15 D1 LED (Red 3 mm) Indicator LED 1 Digi-Key WP710A10ID RA2 status indicator (Provided by Peralta) 16 Breadboard / Jumper Wires Prototyping accessory \u2013 1 set Peralta \u2013 For breadboard testing (Provided by Peralta) 17 USB Cable (Micro-B) Programming &amp; Power \u2013 1 Peralta \u2013 For Curiosity Nano 18 J2, J3, J5 8-Pin IDC Ribbon Cable Standard 8-conductor ribbon cable with connectors attached (2\u00d74 pin) 3 Peralta \u2013 Cable that connects Hub \u2194 Filter \u2194 Sensors","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#system-notes","title":"System Notes","text":"<ul> <li>Power Input: 9 V DC via barrel jack \u2192 LM7805 \u2192 +5 V rail.  </li> <li>Logic Level: 3.3 V I/O (compatible with Curiosity Nano).  </li> <li>Inter-Board Connection: 8-pin ribbon standard (+5 V, GND, signals).  </li> <li>Safety: 1 A fuse + decoupling capacitors at each subsystem.  </li> </ul>","tags":["tag1","tag2"]},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/","title":"Schematic & PCB Design","text":""},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/#overview","title":"Overview","text":"<p>This schematic shows the PIC18F57Q43 Curiosity Nano as the central controller for the ClapSense Hub. It interfaces with three external subsystems \u2014 the Audio Front-End, Light Detector Board, and Distance Front-End \u2014 using standardized 8-pin ribbon connectors.  </p> <p>The design includes a 9 V \u2192 5 V LM7805 voltage regulator with fuse protection, a FAN8100N H-Bridge motor driver for the actuator, and a 3.3 V logic interface between all boards. All power and signal connections align with the team block diagram and system-level design.</p>"},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/#schematic-preview","title":"Schematic Preview","text":""},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/#pcb-preview","title":"PCB Preview","text":""},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/#downloads","title":"Downloads","text":"<ul> <li>View full PDF schematic </li> <li>Download KiCad project ZIP</li> <li>Download PCB Gerber Files project ZIP</li> </ul>"},{"location":"04-Schematic%20%26%20PCB%20Design/schematic/#notes","title":"Notes","text":"<ul> <li>Logic Voltage: 3.3 V (from PIC18F57Q43 VTG pin)  </li> <li>Motor Driver Supply: 5 V regulated from LM7805  </li> <li>Input Power: 9 V DC via barrel jack \u2192 Fuse \u2192 LM7805 \u2192 +5V_SYS rail  </li> <li>Outputs: +5V_SYS shared with all subsystems through 8-pin connectors  </li> <li>Motor Driver: FAN8100N handles bidirectional drive, braking, and back-EMF protection internally  </li> <li>Grounds: All GND nets are shared across every subsystem for common reference  </li> </ul>"},{"location":"05-Power-Budget/Power-Budget/","title":"Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#overview","title":"Overview","text":"<p>This section will include power consumption estimates for each subsystem once the design is finalized. For now, this page serves as a placeholder with the Power Budget spreadsheet available for reference.  </p> <p>The power budget will later calculate: - Current draw for each component (microcontroller, H-bridge, motor, etc.) - Power rail groupings (3.3 V logic and 6\u20139 V motor) - Supply margins and thermal headroom  </p>"},{"location":"05-Power-Budget/Power-Budget/#conclusions","title":"Conclusions","text":"<p>This page will be updated after testing and measurement data are collected during the External Design Review.  </p>"},{"location":"05-Power-Budget/Power-Budget/#resources","title":"Resources","text":"<p>The Power Budget template can be downloaded below:  </p> <ul> <li>Power Budget (.xlsx) </li> <li>Power Budget (.pdf) </li> </ul>"},{"location":"Appendix/","title":"Appendix - Main Page","text":"<p>The Appendix is where supporting information goes that is not in the main body.</p>"},{"location":"Appendix/another-subfile/","title":"Appendix - Another Subfile","text":"<p>Things to discuss</p>"},{"location":"Appendix/basic-markdown-examples/","title":"Appendix - Basic Markdown Examples","text":""},{"location":"Appendix/basic-markdown-examples/#introduction","title":"Introduction","text":"<p>Bold Text Italic Text Bold and Italic Text</p>"},{"location":"Appendix/basic-markdown-examples/#research-question","title":"Research Question","text":"<ul> <li>Bullet Point 1</li> <li>Bullet Point 2</li> <li>Bullet Point 3</li> </ul>"},{"location":"Appendix/basic-markdown-examples/#images","title":"Images","text":"<p> Figure 2: Early PCB working design</p> <p> Figure 3: Innovation Showcase Spring '25, where the products were a STEM-themed display that demonstrates a single scientific/engineering concept with the intended user of K-12 students interested in learning about science, technology, engineering, or math.</p>"},{"location":"Appendix/basic-markdown-examples/#results","title":"Results","text":"<ol> <li>Numbered Point 1</li> <li>Numbered Point 2</li> <li>Numbered Point 3</li> </ol>"},{"location":"Appendix/basic-markdown-examples/#conclusions-and-future-work","title":"Conclusions and Future Work","text":""},{"location":"Appendix/basic-markdown-examples/#external-links","title":"External Links","text":"<p>example link to idealab</p>"},{"location":"Appendix/basic-markdown-examples/#results_1","title":"Results","text":"<ol> <li>Numbered Point 1</li> <li>Numbered Point 2</li> <li>Numbered Point 3</li> </ol>"},{"location":"Appendix/basic-markdown-examples/#conclusions-and-future-work_1","title":"Conclusions and Future Work","text":""},{"location":"Appendix/basic-markdown-examples/#external-links_1","title":"External Links","text":"<p>example link to idealab</p>"},{"location":"Appendix/basic-markdown-examples/#references","title":"References","text":""},{"location":"Appendix/charts/","title":"Appendix - Charts Example","text":"<pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre> <pre><code>sequenceDiagram\n  autonumber\n  Alice-&gt;&gt;John: Hello John, how are you?\n  loop Healthcheck\n      John-&gt;&gt;John: Fight against hypochondria\n  end\n  Note right of John: Rational thoughts!\n  John--&gt;&gt;Alice: Great!\n  John-&gt;&gt;Bob: How about you?\n  Bob--&gt;&gt;John: Jolly good!</code></pre> <pre><code>stateDiagram-v2\n  state fork_state &lt;&lt;fork&gt;&gt;\n    [*] --&gt; fork_state\n    fork_state --&gt; State2\n    fork_state --&gt; State3\n\n    state join_state &lt;&lt;join&gt;&gt;\n    State2 --&gt; join_state\n    State3 --&gt; join_state\n    join_state --&gt; State4\n    State4 --&gt; [*]</code></pre>"},{"location":"Appendix/esp-32-table/","title":"Appendix - Example Controller Table for the ESP32","text":"ESP Info Answer Help Model ? Include the entire part number (leave off any letters at the end that specify the package type) Product Page URL ? Found on Espressif.com ESP32-S3-WROOM-1-N4 Datasheet URL ? Do not paste links directly into the table.  Use a link ESP32 S3 Datasheet URL ? Has more detail on functions ESP32 S3 Technical Reference Manual URL ? Has details on I/O multiplexing, USB, and others Vendor link ? Digikey, Jameco, etc.  Do not paste links directly into the table.  Use a link Code Examples ? url(s) for libraries on github or other sites related to the microcontroller and your planned peripherals External Resources URL(s) ? Search on Google and YouTube for other resources for each specific microcontroller. Unit cost ? Find on Digikey, Jameco, MPJA, or octopart Absolute Maximum Current for entire IC ? Find in the microcontroller datasheet Supply Voltage Range ? Min / Nominal / Max / Absolute Max, as found in datasheet Absolute Maximum current  (for entire IC) ? as found in datasheet Maximum GPIO current  (per pin) ? as found in datasheet Supports External Interrupts? ? as found in datasheet Required Programming Hardware, Cost, URL ? as found in datasheet Module # Available Needed Associated Pins (or * for any) UART ? ? ? external SPI* ? ? ? I2C ? ? ? GPIO ? ? ? ADC ? ? ? LED PWM ? ? ? Motor PWM ? ? ? USB Programmer ? 1 ? ... <p>* The ESP32-S2 has multiple SPI interfaces, but some are for internal use</p>"}]}